<div class="chapter-fields">
  <div class="accordionButton">
    <h3><%= t('stories.edit.chapter') %> <%= f.object.reference %></h3>
  </div>
  <div class="accordionContent">
    <%= f.input :reference, label: t('stories.edit.reference'), input_html: { title: t('tooltip.chapter_reference'), class: "chapter-reference"} %>
    <%= f.input :content, as: :text, label: t('stories.edit.content'), input_html: { rows: 10, style: 'width: 100%', title: t('tooltip.chapter_content'), class: 'chapter-content-wysiwyg' } %>
    <%= f.input :image, label: t('stories.edit.image'), input_html: {onchange: "validateFiles(this);"}, data: {max_file_size: 300.kilobytes} %>
    <% if f.object.image.blank? %>
      <%= t('stories.edit.no_current_image') %>
    <% else %>
      <div class="chapter-image">
        <%= t('stories.edit.current_image') %>: <%= image_tag Chapter.find(f.object.id).image(:thumbnail) %>
      </div>
      <%= f.input :id, as: :hidden %>
      <p><%= link_to t('stories.edit.remove_image'), "#", remote: true, class: "remove btn btn-primary" %></p>
    <% end %>
    <div class="decisions">
      <h3><%= t('stories.edit.decisions') %></h3>
      <%= f.simple_fields_for :decisions do |builder| %>
        <%= render partial: "/decisions/decisions_fields", :locals => {:f => builder} %>
      <% end %>
      <%= link_to_add_fields t('stories.edit.add_decisions'), f, :decisions, "decisions" %>
    </div>
    <div class="monsters">
      <h3><%= t('stories.edit.monsters') %></h3>
      <%= f.simple_fields_for :monsters do |builder| %>
        <%= render partial: "/monsters/monsters_fields", :locals => {:f => builder} %>
      <% end %>
      <%= link_to_add_fields t('stories.edit.add_monsters'), f, :monsters, "monsters" %>
    </div>
    <div class="modifiers-items">
      <h3><%= t('stories.edit.items') %></h3>
      <%= f.simple_fields_for :modifiers_items do |builder| %>
        <%= render "/modifiers_items/modifiers_items_fields", f: builder %>
      <% end %>
      <%= link_to_add_fields t('stories.edit.add_item'), f, :modifiers_items, "modifiers_items" %>
    </div>
    <div class="modifiers-attributes">
      <h3><%= t('stories.edit.attribute_modifiers') %></h3>
      <%= f.simple_fields_for :modifiers_attributes do |builder| %>
        <%= render "/modifiers_attributes/modifiers_attributes_fields", f: builder %>
      <% end %>
      <%= link_to_add_fields t('stories.edit.add_modifier'), f, :modifiers_attributes, "modifiers_attributes" %>
    </div>
    <p><%= link_to_remove_fields t('stories.edit.remove_chapter'), f, "chapter" %></p>
  </div>
</div>
<br/>
