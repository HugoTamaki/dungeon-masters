<script>
  $(document).ready(function() {
    $('#publish').click(function() {
      $.ajax({
        url: 'publish',
        type: 'POST',
        data: {
          story_id: $('#story_id').val()
        },
        dataType: 'json',
        success: function(data) {
          $("#publish").html(data["button"]);
          showMessage(data["message"]);
        },
        error: function(response) {
          showMessage(response["message"]);
        }
      });
    });

    function showMessage(message) {
      $('.message-container').fadeIn();
      $('.message-container').removeClass('alert alert-success');
      $('.message-container').removeClass('alert alert-danger');
      $('.message-container').addClass('alert alert-success');
      $('.message-container').html(message);
      $('.message-container').fadeOut(3000);
    }
  });
</script>